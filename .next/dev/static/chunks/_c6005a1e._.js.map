{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/lib/utils.js"],"sourcesContent":["// lib/utils.js\r\nexport const formatRupiah = (n) => {\r\n  return new Intl.NumberFormat('id-ID', {\r\n    style: 'currency',\r\n    currency: 'IDR',\r\n    minimumFractionDigits: 0\r\n  }).format(n);\r\n};\r\n\r\nexport const sizeRank = ['ALL','ALL SIZE','ALLSIZE','XXXS','XXS','XS','S','M','L','XL','XXL','2XL','3XL','XXXL','4XL','5XL'];\r\n\r\nexport const sortBySize = (variantA, variantB) => {\r\n  const sizeA = (variantA.size || '').toUpperCase().trim();\r\n  const sizeB = (variantB.size || '').toUpperCase().trim();\r\n  const idxA = sizeRank.indexOf(sizeA);\r\n  const idxB = sizeRank.indexOf(sizeB);\r\n  \r\n  if (idxA !== -1 && idxB !== -1) return idxA - idxB;\r\n  if (idxA !== -1) return -1; \r\n  if (idxB !== -1) return 1;\r\n  \r\n  const colorCompare = (variantA.color || '').localeCompare(variantB.color || '');\r\n  if (colorCompare !== 0) return colorCompare;\r\n  \r\n  return (variantA.sku || '').localeCompare(variantB.sku || '');\r\n};"],"names":[],"mappings":"AAAA,eAAe;;;;;;;;;AACR,MAAM,eAAe,CAAC;IAC3B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,WAAW;IAAC;IAAM;IAAW;IAAU;IAAO;IAAM;IAAK;IAAI;IAAI;IAAI;IAAK;IAAM;IAAM;IAAM;IAAO;IAAM;CAAM;AAErH,MAAM,aAAa,CAAC,UAAU;IACnC,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,OAAO,SAAS,OAAO,CAAC;IAC9B,MAAM,OAAO,SAAS,OAAO,CAAC;IAE9B,IAAI,SAAS,CAAC,KAAK,SAAS,CAAC,GAAG,OAAO,OAAO;IAC9C,IAAI,SAAS,CAAC,GAAG,OAAO,CAAC;IACzB,IAAI,SAAS,CAAC,GAAG,OAAO;IAExB,MAAM,eAAe,CAAC,SAAS,KAAK,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,KAAK,IAAI;IAC5E,IAAI,iBAAiB,GAAG,OAAO;IAE/B,OAAO,CAAC,SAAS,GAAG,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,GAAG,IAAI;AAC5D"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/master/ProductView.js"],"sourcesContent":["// app/products/page.js\r\n\"use client\";\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { db, storage } from '@/lib/firebase';\r\nimport { collection, getDocs, addDoc, doc, updateDoc, deleteDoc, query, orderBy, serverTimestamp, where } from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { sortBySize, formatRupiah } from '@/lib/utils';\r\nimport imageCompression from 'browser-image-compression';\r\n\r\nexport default function ProductsPage() {\r\n    const [products, setProducts] = useState([]);\r\n    const [brands, setBrands] = useState([]);\r\n    const [categories, setCategories] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    \r\n    // Modal State (Hanya untuk Add/Edit Produk)\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [formData, setFormData] = useState({});\r\n    \r\n    // Image Upload State\r\n    const [imageFile, setImageFile] = useState(null);\r\n    const [uploading, setUploading] = useState(false);\r\n    const [previewUrl, setPreviewUrl] = useState(null);\r\n    const fileInputRef = useRef(null);\r\n\r\n    // --- ACCORDION STATE (New) ---\r\n    const [expandedProductId, setExpandedProductId] = useState(null);\r\n    const [variantsCache, setVariantsCache] = useState({}); // Cache data varian agar tidak fetch ulang terus\r\n    const [loadingVariants, setLoadingVariants] = useState(false);\r\n    \r\n    // Filter State\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    useEffect(() => { fetchData(); }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [snapBrands, snapCats, snapProds] = await Promise.all([\r\n                getDocs(query(collection(db, \"brands\"), orderBy(\"name\", \"asc\"))),\r\n                getDocs(query(collection(db, \"categories\"), orderBy(\"name\", \"asc\"))),\r\n                getDocs(collection(db, \"products\"))\r\n            ]);\r\n\r\n            const brandsData = []; snapBrands.forEach(d => brandsData.push({id: d.id, ...d.data()}));\r\n            setBrands(brandsData);\r\n\r\n            const catsData = []; snapCats.forEach(d => catsData.push({id: d.id, ...d.data()}));\r\n            setCategories(catsData);\r\n\r\n            const prodsData = [];\r\n            snapProds.forEach(d => {\r\n                const data = d.data();\r\n                const brandName = brandsData.find(b => b.id === data.brand_id)?.name || '';\r\n                prodsData.push({id: d.id, ...data, brand_name: brandName});\r\n            });\r\n            prodsData.sort((a,b) => (a.base_sku || '').localeCompare(b.base_sku || ''));\r\n            setProducts(prodsData);\r\n        } catch (e) { console.error(e); } finally { setLoading(false); }\r\n    };\r\n\r\n    const filteredProducts = products.filter(p => \r\n        p.name.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n        p.base_sku.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    // --- ACCORDION LOGIC ---\r\n    const toggleVariants = async (productId) => {\r\n        // Jika diklik lagi, tutup accordion\r\n        if (expandedProductId === productId) {\r\n            setExpandedProductId(null);\r\n            return;\r\n        }\r\n\r\n        setExpandedProductId(productId);\r\n\r\n        // Cek apakah data varian sudah ada di cache?\r\n        if (!variantsCache[productId]) {\r\n            setLoadingVariants(true);\r\n            try {\r\n                const q = query(collection(db, \"product_variants\"), where(\"product_id\", \"==\", productId));\r\n                const snap = await getDocs(q);\r\n                const vars = [];\r\n                snap.forEach(d => vars.push({id: d.id, ...d.data()}));\r\n                \r\n                // Simpan ke cache\r\n                setVariantsCache(prev => ({ ...prev, [productId]: vars }));\r\n            } catch (e) {\r\n                console.error(e);\r\n            } finally {\r\n                setLoadingVariants(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const openModal = (prod = null) => {\r\n        setImageFile(null);\r\n        setUploading(false);\r\n        if(fileInputRef.current) fileInputRef.current.value = \"\";\r\n        \r\n        if (prod) {\r\n            setFormData({ ...prod });\r\n            setPreviewUrl(prod.image_url || null);\r\n        } else {\r\n            setFormData({ brand_id: '', name: '', base_sku: '', category: '', description: '', status: 'active', image_url: '' });\r\n            setPreviewUrl(null);\r\n        }\r\n        setModalOpen(true);\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        if (e.target.files[0]) {\r\n            const file = e.target.files[0];\r\n            if (!file.type.startsWith('image/')) return alert('Harap upload file gambar.');\r\n            setImageFile(file);\r\n            setPreviewUrl(URL.createObjectURL(file));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setUploading(true);\r\n        console.log(\"1. Memulai proses submit...\");\r\n\r\n        try {\r\n            let imageUrl = formData.image_url;\r\n\r\n            if (imageFile) {\r\n                console.log(\"2. File gambar terdeteksi. Memulai kompresi...\");\r\n                const options = { maxSizeMB: 0.1, maxWidthOrHeight: 800, useWebWorker: true, fileType: 'image/webp' };\r\n\r\n                let compressedBlob;\r\n                try {\r\n                    compressedBlob = await imageCompression(imageFile, options);\r\n                    console.log(\"3. Kompresi Berhasil:\", compressedBlob.size);\r\n                } catch (compError) {\r\n                    console.error(\"Gagal kompresi, menggunakan file asli:\", compError);\r\n                    compressedBlob = imageFile;\r\n                }\r\n                \r\n                console.log(\"4. Memulai Upload ke Firebase Storage...\");\r\n                const fileName = `products/${Date.now()}_${imageFile.name.replace(/\\.[^/.]+$/, \"\")}.webp`;\r\n                const storageRef = ref(storage, fileName);\r\n                \r\n                const snapshot = await uploadBytes(storageRef, compressedBlob);\r\n                imageUrl = await getDownloadURL(snapshot.ref);\r\n                \r\n                if(previewUrl && previewUrl.startsWith('blob:')) URL.revokeObjectURL(previewUrl);\r\n            }\r\n\r\n            console.log(\"7. Menyimpan data produk ke Firestore...\");\r\n            const payload = { \r\n                ...formData, \r\n                image_url: imageUrl || '',\r\n                updated_at: serverTimestamp() \r\n            };\r\n\r\n            if (formData.id) {\r\n                await updateDoc(doc(db, \"products\", formData.id), payload);\r\n            } else {\r\n                payload.created_at = serverTimestamp();\r\n                await addDoc(collection(db, \"products\"), payload);\r\n            }\r\n            \r\n            alert(\"Produk berhasil disimpan!\");\r\n            setModalOpen(false); \r\n            fetchData();\r\n        } catch (err) { \r\n            console.error(\"ERROR:\", err);\r\n            alert(`Gagal: ${err.message}`);\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    const deleteProduct = async (id) => {\r\n        if(confirm(\"Hapus produk ini?\")) { await deleteDoc(doc(db, \"products\", id)); fetchData(); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto space-y-6 fade-in pb-20\">\r\n            {/* Page Header */}\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-semibold text-gray-900 tracking-tight\">Products</h2>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Manage your product catalog and base models.</p>\r\n                </div>\r\n                <button onClick={() => openModal()} className=\"btn-primary\">\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"/></svg>\r\n                    Add Product\r\n                </button>\r\n            </div>\r\n\r\n            {/* Filter Bar */}\r\n            <div className=\"flex items-center gap-4 bg-white p-2 rounded-xl border border-gray-200 shadow-sm\">\r\n                <div className=\"relative flex-1\">\r\n                    <svg className=\"w-5 h-5 text-gray-400 absolute left-3 top-2.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"/></svg>\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Search by name or SKU...\" \r\n                        className=\"w-full pl-10 pr-4 py-2 text-sm text-gray-700 bg-transparent border-none focus:ring-0 placeholder-gray-400\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Data Table */}\r\n            <div className=\"card p-0 overflow-hidden\">\r\n                <div className=\"table-wrapper border-0 rounded-none shadow-none\">\r\n                    <table className=\"table-modern\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th className=\"w-16 pl-6\">Image</th>\r\n                                <th>Product Info</th>\r\n                                <th>Brand</th>\r\n                                <th>Category</th>\r\n                                <th>Status</th>\r\n                                <th className=\"text-right pr-6\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {loading ? (\r\n                                <tr><td colSpan=\"6\" className=\"text-center py-12 text-gray-400\">Loading data...</td></tr>\r\n                            ) : filteredProducts.length === 0 ? (\r\n                                <tr><td colSpan=\"6\" className=\"text-center py-12 text-gray-400\">No products found.</td></tr>\r\n                            ) : (\r\n                                filteredProducts.map(p => {\r\n                                    const isExpanded = expandedProductId === p.id;\r\n                                    \r\n                                    return (\r\n                                        <>\r\n                                            <tr key={p.id} className={`group transition-colors ${isExpanded ? 'bg-brand-50/30' : 'hover:bg-gray-50'}`}>\r\n                                                <td className=\"pl-6 py-3\">\r\n                                                    <div className=\"w-10 h-10 rounded-lg bg-gray-100 border border-gray-200 overflow-hidden flex items-center justify-center\">\r\n                                                        {p.image_url ? (\r\n                                                            <img src={p.image_url} alt={p.name} className=\"w-full h-full object-cover\" />\r\n                                                        ) : (\r\n                                                            <svg className=\"w-5 h-5 text-gray-300\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" /></svg>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <div className=\"flex flex-col\">\r\n                                                        <span className=\"font-medium text-gray-900\">{p.name}</span>\r\n                                                        {/* ACCORDION TRIGGER */}\r\n                                                        <button \r\n                                                            onClick={() => toggleVariants(p.id)} \r\n                                                            className=\"text-xs font-mono text-brand-600 hover:text-brand-800 hover:underline text-left w-fit flex items-center gap-1 mt-0.5 transition-colors\"\r\n                                                        >\r\n                                                            <span className={`transform transition-transform duration-200 ${isExpanded ? 'rotate-90' : ''}`}>â–¶</span> \r\n                                                            {p.base_sku}\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td><span className=\"badge badge-neutral\">{p.brand_name || '-'}</span></td>\r\n                                                <td><span className=\"text-sm text-gray-600\">{p.category}</span></td>\r\n                                                <td>\r\n                                                    <span className={`badge ${p.status === 'active' ? 'badge-success' : 'badge-neutral'}`}>\r\n                                                        {p.status || 'Active'}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"text-right pr-6\">\r\n                                                    <div className=\"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                        <button onClick={() => openModal(p)} className=\"p-1.5 text-gray-400 hover:text-brand-600 hover:bg-gray-50 rounded-lg transition-colors\">\r\n                                                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"/></svg>\r\n                                                        </button>\r\n                                                        <button onClick={() => deleteProduct(p.id)} className=\"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\">\r\n                                                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/></svg>\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                            {/* ACCORDION CONTENT ROW */}\r\n                                            {isExpanded && (\r\n                                                <tr className=\"bg-gray-50/50 shadow-inner\">\r\n                                                    <td colSpan=\"6\" className=\"p-0\">\r\n                                                        <div className=\"p-4 pl-[5.5rem] fade-in\">\r\n                                                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                                                <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\">Variants List</span>\r\n                                                                <div className=\"h-px flex-1 bg-gray-200\"></div>\r\n                                                            </div>\r\n                                                            \r\n                                                            {loadingVariants && !variantsCache[p.id] ? (\r\n                                                                <div className=\"py-4 text-center text-xs text-gray-400 flex items-center justify-center gap-2\">\r\n                                                                    <svg className=\"animate-spin h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\"><circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle><path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>\r\n                                                                    Loading variants...\r\n                                                                </div>\r\n                                                            ) : (variantsCache[p.id] || []).length === 0 ? (\r\n                                                                <div className=\"py-4 text-center text-xs text-gray-400 italic\">No variants available.</div>\r\n                                                            ) : (\r\n                                                                <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm max-w-3xl\">\r\n                                                                    <table className=\"w-full text-sm text-left\">\r\n                                                                        <thead className=\"bg-gray-50 text-xs text-gray-500 uppercase border-b border-gray-100\">\r\n                                                                            <tr>\r\n                                                                                <th className=\"px-4 py-2 font-medium\">SKU</th>\r\n                                                                                <th className=\"px-4 py-2 font-medium\">Color</th>\r\n                                                                                <th className=\"px-4 py-2 font-medium\">Size</th>\r\n                                                                                <th className=\"px-4 py-2 font-medium text-right\">HPP</th>\r\n                                                                                <th className=\"px-4 py-2 font-medium text-right\">Price</th>\r\n                                                                            </tr>\r\n                                                                        </thead>\r\n                                                                        <tbody className=\"divide-y divide-gray-50\">\r\n                                                                            {(variantsCache[p.id] || []).sort(sortBySize).map(v => (\r\n                                                                                <tr key={v.id} className=\"hover:bg-brand-50/20 transition-colors\">\r\n                                                                                    <td className=\"px-4 py-2 font-mono text-xs text-brand-700 font-bold\">{v.sku}</td>\r\n                                                                                    <td className=\"px-4 py-2\"><span className=\"badge badge-neutral\">{v.color}</span></td>\r\n                                                                                    <td className=\"px-4 py-2\"><span className=\"badge badge-neutral\">{v.size}</span></td>\r\n                                                                                    <td className=\"px-4 py-2 text-right text-xs text-gray-500\">{formatRupiah(v.cost)}</td>\r\n                                                                                    <td className=\"px-4 py-2 text-right font-semibold text-gray-900\">{formatRupiah(v.price)}</td>\r\n                                                                                </tr>\r\n                                                                            ))}\r\n                                                                        </tbody>\r\n                                                                    </table>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            )}\r\n                                        </>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal Product Form - Tetap sama seperti sebelumnya */}\r\n            {modalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 backdrop-blur-sm p-4 transition-all\">\r\n                    <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 max-w-lg w-full p-6 fade-in-up\">\r\n                        <div className=\"flex justify-between items-center mb-6\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-900\">{formData.id ? 'Edit Product' : 'New Product'}</h3>\r\n                            <button onClick={() => setModalOpen(false)} className=\"text-gray-400 hover:text-gray-600\" disabled={uploading}>\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"/></svg>\r\n                            </button>\r\n                        </div>\r\n                        <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n                            {/* Image Upload Area */}\r\n                            <div className=\"flex items-center gap-4 mb-2\">\r\n                                <div className=\"w-20 h-20 rounded-lg bg-gray-50 border border-dashed border-gray-300 flex items-center justify-center overflow-hidden relative group shrink-0\">\r\n                                    {previewUrl ? (\r\n                                        <img src={previewUrl} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                                    ) : (\r\n                                        <svg className=\"w-8 h-8 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"></path></svg>\r\n                                    )}\r\n                                    <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"absolute inset-0 opacity-0 cursor-pointer\" disabled={uploading} />\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Product Image</label>\r\n                                    <input ref={fileInputRef} type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-brand-50 file:text-brand-700 hover:file:bg-brand-100 transition-all\" disabled={uploading} />\r\n                                    <p className=\"text-[10px] text-gray-400 mt-1\">Recommends: Square (1:1), max 200KB (WebP).</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Brand</label>\r\n                                    <select required className=\"select-field\" value={formData.brand_id} onChange={e=>setFormData({...formData, brand_id:e.target.value})} disabled={uploading}>\r\n                                        <option value=\"\">Select Brand</option>\r\n                                        {brands.map(b=><option key={b.id} value={b.id}>{b.name}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Base SKU</label>\r\n                                    <input required className=\"input-field font-mono uppercase\" value={formData.base_sku} onChange={e=>setFormData({...formData, base_sku:e.target.value})} placeholder=\"PRD-001\" disabled={uploading} />\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-medium text-gray-700 mb-1\">Product Name</label>\r\n                                <input required className=\"input-field\" value={formData.name} onChange={e=>setFormData({...formData, name:e.target.value})} placeholder=\"Enter product name\" disabled={uploading} />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Category</label>\r\n                                    <select required className=\"select-field\" value={formData.category} onChange={e=>setFormData({...formData, category:e.target.value})} disabled={uploading}>\r\n                                        <option value=\"\">Select Category</option>\r\n                                        {categories.map(c=><option key={c.id} value={c.name}>{c.name}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Description</label>\r\n                                    <input className=\"input-field\" value={formData.description || ''} onChange={e=>setFormData({...formData, description:e.target.value})} placeholder=\"Short desc\" disabled={uploading} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100 mt-2\">\r\n                                <button type=\"button\" onClick={() => setModalOpen(false)} className=\"btn-ghost\" disabled={uploading}>Cancel</button>\r\n                                <button type=\"submit\" className=\"btn-primary relative\" disabled={uploading}>\r\n                                    {uploading ? 'Processing...' : 'Save Product'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1358, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/master/VariantView.js"],"sourcesContent":["// app/variants/page.js\r\n\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, getDocs, addDoc, doc, updateDoc, deleteDoc, query, orderBy, serverTimestamp } from 'firebase/firestore';\r\nimport { sortBySize, formatRupiah } from '@/lib/utils';\r\n\r\nexport default function VariantsPage() {\r\n    const [variants, setVariants] = useState([]);\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [formData, setFormData] = useState({});\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedBaseSku, setSelectedBaseSku] = useState('-');\r\n\r\n    useEffect(() => { fetchData(); }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [snapProd, snapVar] = await Promise.all([\r\n                getDocs(query(collection(db, \"products\"), orderBy(\"name\", \"asc\"))),\r\n                getDocs(query(collection(db, \"product_variants\"), orderBy(\"sku\", \"asc\")))\r\n            ]);\r\n            const prodsData = []; snapProd.forEach(d => prodsData.push({id: d.id, ...d.data()}));\r\n            setProducts(prodsData);\r\n            const varsData = []; snapVar.forEach(d => varsData.push({id: d.id, ...d.data()}));\r\n            setVariants(varsData);\r\n        } catch (e) { console.error(e); } finally { setLoading(false); }\r\n    };\r\n\r\n    const handleParentChange = (e) => {\r\n        const pid = e.target.value;\r\n        const prod = products.find(p => p.id === pid);\r\n        setFormData({ ...formData, product_id: pid });\r\n        setSelectedBaseSku(prod ? (prod.base_sku || 'No SKU') : '-');\r\n    };\r\n\r\n    const generateSku = () => {\r\n        if (selectedBaseSku === '-' || !formData.color || !formData.size) return alert(\"Please select parent product, color and size first.\");\r\n        const colorClean = formData.color.trim().toUpperCase().replace(/\\s+/g, '-');\r\n        const sizeClean = formData.size.trim().toUpperCase().replace(/\\s+/g, '-');\r\n        const newSku = `${selectedBaseSku}-${colorClean}-${sizeClean}`;\r\n        setFormData({ ...formData, sku: newSku, barcode: formData.barcode || newSku });\r\n    };\r\n\r\n    const openModal = (v = null) => {\r\n        if (v) {\r\n            const prod = products.find(p => p.id === v.product_id);\r\n            setFormData({ ...v });\r\n            setSelectedBaseSku(prod ? prod.base_sku : '-');\r\n        } else {\r\n            setFormData({ product_id: '', sku: '', barcode: '', color: '', size: '', weight: 0, cost: 0, price: 0, min_stock: 5, status: 'active' });\r\n            setSelectedBaseSku('-');\r\n        }\r\n        setModalOpen(true);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const payload = { ...formData, updated_at: serverTimestamp() };\r\n            if (formData.id) await updateDoc(doc(db, \"product_variants\", formData.id), payload);\r\n            else { payload.created_at = serverTimestamp(); await addDoc(collection(db, \"product_variants\"), payload); }\r\n            setModalOpen(false); fetchData();\r\n        } catch (err) { alert(err.message); }\r\n    };\r\n\r\n    const deleteVariant = async (id) => {\r\n        if(confirm(\"Delete this SKU?\")) { await deleteDoc(doc(db, \"product_variants\", id)); fetchData(); }\r\n    };\r\n\r\n    const filteredVariants = variants.filter(v => {\r\n        const term = searchTerm.toLowerCase();\r\n        const pName = products.find(p => p.id === v.product_id)?.name.toLowerCase() || '';\r\n        return v.sku.toLowerCase().includes(term) || pName.includes(term);\r\n    }).sort(sortBySize);\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto space-y-6 fade-in pb-20\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-semibold text-gray-900 tracking-tight\">Variants (SKU)</h2>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Manage individual stock keeping units.</p>\r\n                </div>\r\n                <div className=\"flex gap-3 w-full sm:w-auto\">\r\n                    <div className=\"relative flex-1 sm:w-64\">\r\n                        <svg className=\"w-5 h-5 text-gray-400 absolute left-3 top-2.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"/></svg>\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Search SKU...\" \r\n                            className=\"w-full pl-10 pr-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-100 focus:border-brand-500 outline-none shadow-sm\"\r\n                            value={searchTerm} \r\n                            onChange={e => setSearchTerm(e.target.value)} \r\n                        />\r\n                    </div>\r\n                    <button onClick={() => openModal()} className=\"btn-primary whitespace-nowrap\">\r\n                        Add SKU\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Table */}\r\n            <div className=\"card p-0 overflow-hidden\">\r\n                <div className=\"table-wrapper border-0 shadow-none rounded-none\">\r\n                    <table className=\"table-modern\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th className=\"pl-6\">SKU Final</th>\r\n                                <th>Parent Product</th>\r\n                                <th>Variant Spec</th>\r\n                                <th className=\"text-right\">HPP</th>\r\n                                <th className=\"text-right\">Price</th>\r\n                                <th className=\"text-center\">Status</th>\r\n                                <th className=\"text-right pr-6\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {loading ? <tr><td colSpan=\"7\" className=\"text-center py-12 text-gray-400\">Loading...</td></tr> : filteredVariants.map(v => {\r\n                                const parent = products.find(p => p.id === v.product_id);\r\n                                return (\r\n                                    <tr key={v.id} className=\"group\">\r\n                                        <td className=\"pl-6 font-mono text-xs font-bold text-brand-600 bg-brand-50/30 w-fit rounded-r\">{v.sku}</td>\r\n                                        <td className=\"font-medium text-gray-700\">{parent?.name || '-'}</td>\r\n                                        <td>\r\n                                            <div className=\"flex gap-2\">\r\n                                                <span className=\"badge badge-neutral\">{v.color}</span>\r\n                                                <span className=\"badge badge-neutral\">{v.size}</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"text-right text-gray-500 text-xs\">{formatRupiah(v.cost)}</td>\r\n                                        <td className=\"text-right font-semibold text-gray-900 text-xs\">{formatRupiah(v.price)}</td>\r\n                                        <td className=\"text-center\">\r\n                                            <span className={`badge ${v.status === 'active' ? 'badge-success' : 'badge-neutral'}`}>{v.status}</span>\r\n                                        </td>\r\n                                        <td className=\"text-right pr-6\">\r\n                                            <div className=\"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                <button onClick={() => openModal(v)} className=\"text-xs font-bold text-brand-600 hover:text-brand-800 px-2 py-1 rounded hover:bg-brand-50\">Edit</button>\r\n                                                <button onClick={() => deleteVariant(v.id)} className=\"text-xs font-bold text-red-600 hover:text-red-800 px-2 py-1 rounded hover:bg-red-50\">Del</button>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            {modalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 max-w-2xl w-full p-6 fade-in-up overflow-y-auto max-h-[90vh]\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">{formData.id ? 'Edit SKU' : 'New SKU'}</h3>\r\n                        <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n                            \r\n                            <div className=\"bg-brand-25 p-4 rounded-xl border border-brand-100\">\r\n                                <label className=\"block text-xs font-bold text-brand-800 uppercase mb-1\">Parent Product</label>\r\n                                <select required className=\"select-field bg-white\" value={formData.product_id} onChange={handleParentChange}>\r\n                                    <option value=\"\">-- Select Model --</option>\r\n                                    {products.map(p => <option key={p.id} value={p.id}>{p.name} ({p.base_sku})</option>)}\r\n                                </select>\r\n                                <div className=\"text-xs text-brand-600 mt-2 font-mono flex items-center gap-2\">\r\n                                    Base SKU: <span className=\"font-bold bg-white px-2 py-0.5 rounded border border-brand-200\">{selectedBaseSku}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                                <div><label className=\"block text-xs font-medium text-gray-700 mb-1\">Color</label><input className=\"input-field\" value={formData.color} onChange={e => setFormData({...formData, color: e.target.value})} placeholder=\"Black\" /></div>\r\n                                <div><label className=\"block text-xs font-medium text-gray-700 mb-1\">Size</label><input className=\"input-field\" value={formData.size} onChange={e => setFormData({...formData, size: e.target.value})} placeholder=\"XL\" /></div>\r\n                                <div><label className=\"block text-xs font-medium text-gray-700 mb-1\">Weight (g)</label><input type=\"number\" className=\"input-field\" value={formData.weight} onChange={e => setFormData({...formData, weight: e.target.value})} /></div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-xl border border-gray-100\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-gray-500 mb-1\">Final SKU</label>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <input required className=\"input-field font-mono uppercase bg-white\" value={formData.sku} onChange={e => setFormData({...formData, sku: e.target.value})} />\r\n                                        <button type=\"button\" onClick={generateSku} className=\"px-3 py-2 bg-white border border-gray-300 rounded-lg text-xs font-bold text-gray-600 hover:bg-gray-50\">Auto</button>\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-gray-500 mb-1\">Barcode</label>\r\n                                    <input className=\"input-field bg-white\" value={formData.barcode} onChange={e => setFormData({...formData, barcode: e.target.value})} placeholder=\"Scan...\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                                <div><label className=\"block text-xs font-medium text-gray-700 mb-1\">HPP (Cost)</label><input type=\"number\" required className=\"input-field\" value={formData.cost} onChange={e => setFormData({...formData, cost: e.target.value})} /></div>\r\n                                <div><label className=\"block text-xs font-bold text-brand-600 mb-1\">Sell Price</label><input type=\"number\" required className=\"input-field font-bold text-brand-700 bg-brand-50/30\" value={formData.price} onChange={e => setFormData({...formData, price: e.target.value})} /></div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">Status</label>\r\n                                    <select className=\"select-field\" value={formData.status} onChange={e => setFormData({...formData, status: e.target.value})}>\r\n                                        <option value=\"active\">Active</option>\r\n                                        <option value=\"inactive\">Inactive</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold mb-1\">Min. Stock</label>\r\n                                <input \r\n                                    type=\"number\" \r\n                                    className=\"w-full border p-2 rounded\" \r\n                                    value={formData.min_stock || 0} \r\n                                    onChange={e => setFormData({...formData, min_stock: e.target.value})} \r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100 mt-2\">\r\n                                <button type=\"button\" onClick={() => setModalOpen(false)} className=\"btn-ghost\">Cancel</button>\r\n                                <button type=\"submit\" className=\"btn-primary\">Save SKU</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2290, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/master/BrandView.js"],"sourcesContent":["// app/brands/page.js\r\n\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, getDocs, addDoc, doc, updateDoc, deleteDoc, query, orderBy, serverTimestamp } from 'firebase/firestore';\r\n\r\nexport default function BrandsPage() {\r\n    const [brands, setBrands] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [formData, setFormData] = useState({});\r\n\r\n    useEffect(() => { fetchData(); }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const q = query(collection(db, \"brands\"), orderBy(\"name\", \"asc\"));\r\n            const snap = await getDocs(q);\r\n            const data = [];\r\n            snap.forEach(d => data.push({id: d.id, ...d.data()}));\r\n            setBrands(data);\r\n        } catch (e) { console.error(e); } finally { setLoading(false); }\r\n    };\r\n\r\n    const openModal = (brand = null) => {\r\n        setFormData(brand ? { ...brand } : { name: '', type: 'own_brand' });\r\n        setModalOpen(true);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const payload = { name: formData.name, type: formData.type, updated_at: serverTimestamp() };\r\n            if (formData.id) await updateDoc(doc(db, \"brands\", formData.id), payload);\r\n            else { payload.created_at = serverTimestamp(); await addDoc(collection(db, \"brands\"), payload); }\r\n            setModalOpen(false); fetchData();\r\n        } catch (e) { alert(e.message); }\r\n    };\r\n\r\n    const deleteBrand = async (id) => {\r\n        if(confirm(\"Delete brand?\")) { await deleteDoc(doc(db, \"brands\", id)); fetchData(); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-5xl mx-auto space-y-6 fade-in\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Master Brands</h2>\r\n                    <p className=\"text-sm text-gray-500\">Manage your own brands and supplier brands.</p>\r\n                </div>\r\n                <button onClick={() => openModal()} className=\"btn-primary\">\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\"/></svg>\r\n                    Add Brand\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"card p-0 overflow-hidden\">\r\n                <div className=\"table-wrapper\">\r\n                    <table className=\"table-modern\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Brand Name</th>\r\n                                <th>Type</th>\r\n                                <th className=\"text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {loading ? <tr><td colSpan=\"3\" className=\"text-center py-8 text-gray-400\">Loading...</td></tr> : brands.map(b => (\r\n                                <tr key={b.id}>\r\n                                    <td className=\"font-semibold text-gray-900\">{b.name}</td>\r\n                                    <td>\r\n                                        {b.type === 'own_brand' \r\n                                            ? <span className=\"badge badge-brand\">Own Brand</span>\r\n                                            : <span className=\"badge badge-warning\">Supplier</span>\r\n                                        }\r\n                                    </td>\r\n                                    <td className=\"text-right space-x-2\">\r\n                                        <button onClick={() => openModal(b)} className=\"text-xs font-bold text-brand-600 hover:text-brand-800\">Edit</button>\r\n                                        <button onClick={() => deleteBrand(b.id)} className=\"text-xs font-bold text-red-600 hover:text-red-800\">Del</button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {modalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/50 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 fade-in-up\">\r\n                        <h3 className=\"text-lg font-bold text-gray-900 mb-6\">{formData.id ? 'Edit Brand' : 'New Brand'}</h3>\r\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold text-gray-500 mb-1 uppercase\">Brand Name</label>\r\n                                <input type=\"text\" required className=\"input-field\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} placeholder=\"e.g. Al Muslim\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold text-gray-500 mb-1 uppercase\">Type</label>\r\n                                <select className=\"select-field\" value={formData.type} onChange={e => setFormData({...formData, type: e.target.value})}>\r\n                                    <option value=\"own_brand\">Own Brand (Internal)</option>\r\n                                    <option value=\"supplier_brand\">Supplier Brand</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\r\n                                <button type=\"button\" onClick={() => setModalOpen(false)} className=\"btn-secondary\">Cancel</button>\r\n                                <button type=\"submit\" className=\"btn-primary\">Save Brand</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2734, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/master/CategoryView.js"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { collection, getDocs, addDoc, doc, updateDoc, deleteDoc, query, orderBy, serverTimestamp, writeBatch } from \"firebase/firestore\";\r\n\r\nexport default function CategoryView() {\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [formData, setFormData] = useState({});\r\n  const [syncing, setSyncing] = useState(false);\r\n\r\n  useEffect(() => { fetchData(); }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const q = query(collection(db, \"categories\"), orderBy(\"name\", \"asc\"));\r\n      const snap = await getDocs(q);\r\n      const data = [];\r\n      snap.forEach(d => data.push({ id: d.id, ...d.data() }));\r\n      setCategories(data);\r\n    } catch (e) { console.error(e); }\r\n    finally { setLoading(false); }\r\n  };\r\n\r\n  const openModal = (cat = null) => {\r\n    if (cat) setFormData({ ...cat });\r\n    else setFormData({ name: \"\" });\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const payload = { name: formData.name, updated_at: serverTimestamp() };\r\n      if (formData.id) await updateDoc(doc(db, \"categories\", formData.id), payload);\r\n      else { payload.created_at = serverTimestamp(); await addDoc(collection(db, \"categories\"), payload); }\r\n      setModalOpen(false); fetchData();\r\n    } catch (err) { alert(err.message); }\r\n  };\r\n\r\n  const deleteCategory = async (id) => {\r\n    if (confirm(\"Hapus kategori ini?\")) { await deleteDoc(doc(db, \"categories\", id)); fetchData(); }\r\n  };\r\n\r\n  // Sync from products (optional ERP utility, bisa skip kalau tidak perlu)\r\n  const syncFromProducts = async () => {\r\n    setSyncing(true);\r\n    try {\r\n      const pSnap = await getDocs(collection(db, \"products\"));\r\n      const uniqueNames = new Set();\r\n      pSnap.forEach(d => {\r\n        const cat = d.data().category;\r\n        if (cat) uniqueNames.add(cat.trim());\r\n      });\r\n      const existingNames = new Set(categories.map(c => c.name));\r\n      const batch = writeBatch(db);\r\n      let count = 0;\r\n      uniqueNames.forEach(name => {\r\n        if (!existingNames.has(name)) {\r\n          batch.set(doc(collection(db, \"categories\")), { name, created_at: serverTimestamp() });\r\n          count++;\r\n        }\r\n      });\r\n      if (count) await batch.commit();\r\n      fetchData(); alert(count ? `${count} kategori disinkronisasi.` : \"Tidak ada kategori baru.\");\r\n    } catch (e) { alert(\"Gagal sync: \" + e.message); }\r\n    finally { setSyncing(false); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto fade-in pb-20\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-black text-brand-800 tracking-tight\">Kategori</h2>\r\n          <p className=\"text-base text-brand-400 mt-1\">Kelola kategori produk untuk katalog dan filtering.</p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button onClick={() => openModal()} className=\"btn-primary whitespace-nowrap\">Tambah Kategori</button>\r\n          <button onClick={syncFromProducts} className=\"btn-ghost\" disabled={syncing}>{syncing ? \"Syncing...\" : \"Sync Produk\"}</button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"card p-0\">\r\n        <div className=\"table-wrapper\">\r\n          <table className=\"table-modern w-full text-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"pl-6 text-left\">Nama Kategori</th>\r\n                <th className=\"text-right pr-6\">Aksi</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {loading\r\n                ? <tr><td colSpan={2} className=\"py-10 text-center text-brand-200 font-mono animate-pulse\">Memuat dataâ€¦</td></tr>\r\n                : categories.length === 0\r\n                  ? <tr><td colSpan={2} className=\"py-14 text-center text-brand-200\">Belum ada kategori.</td></tr>\r\n                  : categories.map(c => (\r\n                    <tr key={c.id} className=\"group hover:bg-brand-50/40 rounded-xl transition\">\r\n                      <td className=\"pl-6 font-bold text-brand-700\">{c.name}</td>\r\n                      <td className=\"text-right pr-6\">\r\n                        <div className=\"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                          <button onClick={() => openModal(c)} className=\"btn-ghost\">Edit</button>\r\n                          <button onClick={() => deleteCategory(c.id)} className=\"btn-ghost text-red-600 border-red-200 hover:bg-red-50\">Hapus</button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {modalOpen && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-lg p-4\">\r\n          <div className=\"bg-white/95 backdrop-blur rounded-2xl shadow-2xl border border-brand-100 max-w-md w-full px-7 py-8 fade-in-up overflow-y-auto max-h-[95vh]\">\r\n            <h3 className=\"text-2xl font-bold text-brand-700 mb-6\">{formData.id ? \"Edit Kategori\" : \"Tambah Kategori\"}</h3>\r\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n              <div>\r\n                <label className=\"block text-xs font-bold text-brand-700 mb-2\">Nama Kategori</label>\r\n                <input required className=\"input-modern\" value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} />\r\n              </div>\r\n              <div className=\"flex justify-end gap-4 pt-5 border-t border-brand-100 mt-2\">\r\n                <button type=\"button\" onClick={() => setModalOpen(false)} className=\"btn-ghost\">Batal</button>\r\n                <button type=\"submit\" className=\"btn-primary\">Simpan</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3152, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/app/products/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport ProductView from \"@/components/master/ProductView\";\r\nimport VariantView from \"@/components/master/VariantView\";\r\nimport BrandView from \"@/components/master/BrandView\";\r\nimport CategoryView from \"@/components/master/CategoryView\";\r\nimport { CubeIcon, TagIcon, BookmarkIcon, FolderIcon, PlusIcon } from \"@heroicons/react/24/solid\";\r\n\r\nconst tabIcons = {\r\n  products: <CubeIcon className=\"w-5 h-5\" />,\r\n  variants: <TagIcon className=\"w-5 h-5\" />,\r\n  brands: <BookmarkIcon className=\"w-5 h-5\" />,\r\n  categories: <FolderIcon className=\"w-5 h-5\" />,\r\n};\r\n\r\nexport default function ProductHubPage() {\r\n  const [activeTab, setActiveTab] = useState(\"products\");\r\n\r\n  const tabs = [\r\n    { id: \"products\", label: \"Produk\", iconKey: \"products\", desc: \"Parent\" },\r\n    { id: \"variants\", label: \"Varian\", iconKey: \"variants\", desc: \"SKU\" },\r\n    { id: \"brands\", label: \"Brand\", iconKey: \"brands\", desc: \"\" },\r\n    { id: \"categories\", label: \"Kategori\", iconKey: \"categories\", desc: \"\" },\r\n  ];\r\n\r\n  return (\r\n    <main className=\"max-w-7xl mx-auto px-4 sm:px-8 pt-14 space-y-10\">\r\n      {/* HEADER */}\r\n      <div className=\"flex flex-col gap-2 pb-2\">\r\n        <h2 className=\"text-3xl font-black text-brand-800 tracking-tight\">Master Produk</h2>\r\n        <p className=\"text-base text-brand-400\">Manajemen Katalog Terpusat & Integratif</p>\r\n      </div>\r\n\r\n      {/* TABS + Floating Action */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <nav className=\"bg-white/80 border border-gray-100 rounded-2xl shadow flex gap-2 px-2 py-2 overflow-x-auto\">\r\n          {tabs.map((tab) => {\r\n            const active = activeTab === tab.id;\r\n            return (\r\n              <button\r\n                key={tab.id}\r\n                type=\"button\"\r\n                onClick={() => setActiveTab(tab.id)}\r\n                className={`group flex items-center gap-2 px-5 py-2 rounded-full font-medium text-base transition-all select-none\r\n                  ${active ? \"bg-gradient-to-r from-brand-50 to-brand-100 text-brand-700 shadow-lg ring-2 ring-brand-200\" : \"hover:bg-gray-50 text-gray-500\"}\r\n                `}\r\n              >\r\n                <span className={`transition ${active ? \"scale-110\" : \"opacity-75 group-hover:opacity-100\"}`}>{tabIcons[tab.iconKey]}</span>\r\n                <span>{tab.label}</span>\r\n                {tab.desc && (\r\n                  <span className=\"ml-2 px-2 bg-gray-100 text-gray-400 text-xs rounded-full font-medium hidden sm:inline\">{tab.desc}</span>\r\n                )}\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n        <button\r\n          className=\"ml-5 flex items-center gap-2 bg-brand-600 hover:bg-brand-700 text-white rounded-full px-4 py-2 shadow-lg transition\"\r\n        >\r\n          <PlusIcon className=\"w-4 h-4\" /> <span className=\"font-semibold\">Tambah Produk</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* CONTENT */}\r\n      <div className=\"card p-0 mt-2\">\r\n        {activeTab === \"products\" && <ProductView />}\r\n        {activeTab === \"variants\" && <VariantView />}\r\n        {activeTab === \"brands\" && <BrandView />}\r\n        {activeTab === \"categories\" && <CategoryView />}\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;;;AANA;;;;;;;AAQA,MAAM,WAAW;IACf,wBAAU,6LAAC,4NAAQ;QAAC,WAAU;;;;;;IAC9B,wBAAU,6LAAC,yNAAO;QAAC,WAAU;;;;;;IAC7B,sBAAQ,6LAAC,wOAAY;QAAC,WAAU;;;;;;IAChC,0BAAY,6LAAC,kOAAU;QAAC,WAAU;;;;;;AACpC;AAEe,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,OAAO;QACX;YAAE,IAAI;YAAY,OAAO;YAAU,SAAS;YAAY,MAAM;QAAS;QACvE;YAAE,IAAI;YAAY,OAAO;YAAU,SAAS;YAAY,MAAM;QAAM;QACpE;YAAE,IAAI;YAAU,OAAO;YAAS,SAAS;YAAU,MAAM;QAAG;QAC5D;YAAE,IAAI;YAAc,OAAO;YAAY,SAAS;YAAc,MAAM;QAAG;KACxE;IAED,qBACE,6LAAC;QAAK,WAAU;;0BAEd,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoD;;;;;;kCAClE,6LAAC;wBAAE,WAAU;kCAA2B;;;;;;;;;;;;0BAI1C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACZ,KAAK,GAAG,CAAC,CAAC;4BACT,MAAM,SAAS,cAAc,IAAI,EAAE;4BACnC,qBACE,6LAAC;gCAEC,MAAK;gCACL,SAAS,IAAM,aAAa,IAAI,EAAE;gCAClC,WAAW,CAAC;kBACV,EAAE,SAAS,+FAA+F,iCAAiC;gBAC7I,CAAC;;kDAED,6LAAC;wCAAK,WAAW,CAAC,WAAW,EAAE,SAAS,cAAc,sCAAsC;kDAAG,QAAQ,CAAC,IAAI,OAAO,CAAC;;;;;;kDACpH,6LAAC;kDAAM,IAAI,KAAK;;;;;;oCACf,IAAI,IAAI,kBACP,6LAAC;wCAAK,WAAU;kDAAyF,IAAI,IAAI;;;;;;;+BAV9G,IAAI,EAAE;;;;;wBAcjB;;;;;;kCAEF,6LAAC;wBACC,WAAU;;0CAEV,6LAAC,4NAAQ;gCAAC,WAAU;;;;;;4BAAY;0CAAC,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;;;;;;;;;;;;;0BAKrE,6LAAC;gBAAI,WAAU;;oBACZ,cAAc,4BAAc,6LAAC,iJAAW;;;;;oBACxC,cAAc,4BAAc,6LAAC,iJAAW;;;;;oBACxC,cAAc,0BAAY,6LAAC,+IAAS;;;;;oBACpC,cAAc,8BAAgB,6LAAC,kJAAY;;;;;;;;;;;;;;;;;AAIpD;GAzDwB;KAAA"}}]
}