{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/lib/utils.js"],"sourcesContent":["// lib/utils.js\r\nexport const formatRupiah = (n) => {\r\n  return new Intl.NumberFormat('id-ID', {\r\n    style: 'currency',\r\n    currency: 'IDR',\r\n    minimumFractionDigits: 0\r\n  }).format(n);\r\n};\r\n\r\nexport const sizeRank = ['ALL','ALL SIZE','ALLSIZE','XXXS','XXS','XS','S','M','L','XL','XXL','2XL','3XL','XXXL','4XL','5XL'];\r\n\r\nexport const sortBySize = (variantA, variantB) => {\r\n  const sizeA = (variantA.size || '').toUpperCase().trim();\r\n  const sizeB = (variantB.size || '').toUpperCase().trim();\r\n  const idxA = sizeRank.indexOf(sizeA);\r\n  const idxB = sizeRank.indexOf(sizeB);\r\n  \r\n  if (idxA !== -1 && idxB !== -1) return idxA - idxB;\r\n  if (idxA !== -1) return -1; \r\n  if (idxB !== -1) return 1;\r\n  \r\n  const colorCompare = (variantA.color || '').localeCompare(variantB.color || '');\r\n  if (colorCompare !== 0) return colorCompare;\r\n  \r\n  return (variantA.sku || '').localeCompare(variantB.sku || '');\r\n};"],"names":[],"mappings":"AAAA,eAAe;;;;;;;;;AACR,MAAM,eAAe,CAAC;IAC3B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,WAAW;IAAC;IAAM;IAAW;IAAU;IAAO;IAAM;IAAK;IAAI;IAAI;IAAI;IAAK;IAAM;IAAM;IAAM;IAAO;IAAM;CAAM;AAErH,MAAM,aAAa,CAAC,UAAU;IACnC,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,OAAO,SAAS,OAAO,CAAC;IAC9B,MAAM,OAAO,SAAS,OAAO,CAAC;IAE9B,IAAI,SAAS,CAAC,KAAK,SAAS,CAAC,GAAG,OAAO,OAAO;IAC9C,IAAI,SAAS,CAAC,GAAG,OAAO,CAAC;IACzB,IAAI,SAAS,CAAC,GAAG,OAAO;IAExB,MAAM,eAAe,CAAC,SAAS,KAAK,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,KAAK,IAAI;IAC5E,IAAI,iBAAiB,GAAG,OAAO;IAE/B,OAAO,CAAC,SAAS,GAAG,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,GAAG,IAAI;AAC5D"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/app/dashboard/page.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, getDocs, query, where, orderBy, getAggregateFromServer, sum, doc, getDoc, limit } from 'firebase/firestore';\r\nimport { formatRupiah } from '@/lib/utils';\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, ArcElement, BarElement } from 'chart.js';\r\nimport { Line, Doughnut } from 'react-chartjs-2';\r\n\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, BarElement, Title, Tooltip, Legend, ArcElement);\r\n\r\n// --- KONFIGURASI CACHE (OPTIMIZED) ---\r\nconst CACHE_MASTER_KEY = 'lumina_dash_master_v3'; \r\nconst CACHE_SALES_PREFIX = 'lumina_dash_sales_v3_'; \r\nconst CACHE_DURATION_MASTER = 30 * 60 * 1000;\r\nconst CACHE_DURATION_SALES = 5 * 60 * 1000;\r\n\r\nexport default function Dashboard() {\r\n    const [loading, setLoading] = useState(true);\r\n    const [filterRange, setFilterRange] = useState('this_month');\r\n    \r\n    // Data States\r\n    const [masterData, setMasterData] = useState(null);\r\n    const [inventoryStats, setInventoryStats] = useState({ total_value: 0, total_qty: 0 });\r\n    \r\n    // UI States\r\n    const [kpi, setKpi] = useState({ gross: 0, net: 0, profit: 0, margin: 0, cash: 0, inventoryAsset: 0, txCount: 0 });\r\n    const [chartTrendData, setChartTrendData] = useState(null);\r\n    const [chartChannelData, setChartChannelData] = useState(null);\r\n    const [topProducts, setTopProducts] = useState([]);\r\n    const [lowStockItems, setLowStockItems] = useState([]);\r\n    const [recentSales, setRecentSales] = useState([]);\r\n\r\n    // 1. Fetch Master Data (Optimized & Aggregated)\r\n    const fetchMasterData = async () => {\r\n        // Cek Cache LocalStorage\r\n        if (typeof window !== 'undefined') {\r\n            const cached = localStorage.getItem(CACHE_MASTER_KEY);\r\n            if (cached) {\r\n                const { data, ts } = JSON.parse(cached);\r\n                if (Date.now() - ts < CACHE_DURATION_MASTER) return data;\r\n            }\r\n        }\r\n\r\n        // COST OPTIMIZATION:\r\n        // 1. Cash Balance via Aggregation (1 Read)\r\n        const cashAggPromise = getAggregateFromServer(collection(db, \"cash_accounts\"), {\r\n            totalBalance: sum('balance')\r\n        });\r\n\r\n        // 2. Inventory Stats via Cloud Function Aggregation Doc (1 Read)\r\n        // Menggantikan pengambilan ribuan stock_snapshots\r\n        const invStatsPromise = getDoc(doc(db, \"stats_inventory\", \"general\"));\r\n\r\n        // 3. Low Stock Items via Query (Hanya ambil yg < 5, limit 10)\r\n        const lowStockPromise = getDocs(query(collection(db, \"stock_snapshots\"), where(\"qty\", \"<=\", 5), limit(10)));\r\n\r\n        // 4. Master Products & Variants (Tetap butuh untuk mapping nama)\r\n        const productsPromise = getDocs(collection(db, \"products\"));\r\n        const variantsPromise = getDocs(collection(db, \"product_variants\"));\r\n\r\n        const [snapCashAgg, snapInvStats, snapLowStock, snapProd, snapVar] = await Promise.all([\r\n            cashAggPromise,\r\n            invStatsPromise,\r\n            lowStockPromise,\r\n            productsPromise,\r\n            variantsPromise\r\n        ]);\r\n\r\n        // Process Data\r\n        const cashBalance = snapCashAgg.data().totalBalance || 0;\r\n        \r\n        const invData = snapInvStats.exists() ? snapInvStats.data() : { total_value: 0, total_qty: 0 };\r\n        setInventoryStats(invData);\r\n\r\n        const products = [];\r\n        snapProd.forEach(d => products.push({ id: d.id, name: d.data().name }));\r\n        \r\n        const variants = [];\r\n        snapVar.forEach(d => variants.push({ id: d.id, ...d.data() }));\r\n        \r\n        // Process Low Stock (Mapping ID ke Nama)\r\n        const lowStocks = [];\r\n        snapLowStock.forEach(d => {\r\n            const s = d.data();\r\n            const v = variants.find(vr => vr.id === s.variant_id);\r\n            const p = v ? products.find(pr => pr.id === v.product_id) : null;\r\n            if (v && p) {\r\n                lowStocks.push({\r\n                    id: d.id,\r\n                    sku: v.sku,\r\n                    name: p.name,\r\n                    qty: s.qty,\r\n                    min: v.min_stock || 5\r\n                });\r\n            }\r\n        });\r\n\r\n        const result = { cashBalance, products, variants, lowStocks, invStats: invData };\r\n        \r\n        if (typeof window !== 'undefined') {\r\n            localStorage.setItem(CACHE_MASTER_KEY, JSON.stringify({ data: result, ts: Date.now() }));\r\n        }\r\n        return result;\r\n    };\r\n\r\n    const fetchSalesData = async (range) => {\r\n        const cacheKey = `${CACHE_SALES_PREFIX}${range}`;\r\n        if (typeof window !== 'undefined') {\r\n            const cached = localStorage.getItem(cacheKey);\r\n            if (cached) {\r\n                const { data, ts } = JSON.parse(cached);\r\n                if (Date.now() - ts < CACHE_DURATION_SALES) {\r\n                    return data.map(d => ({ ...d, order_date: new Date(d.order_date) }));\r\n                }\r\n            }\r\n        }\r\n\r\n        const now = new Date();\r\n        let start = new Date();\r\n        let end = new Date();\r\n        end.setHours(23, 59, 59, 999);\r\n\r\n        if (range === 'today') start.setHours(0, 0, 0, 0);\r\n        else if (range === 'this_month') start = new Date(now.getFullYear(), now.getMonth(), 1);\r\n        else if (range === 'last_month') {\r\n            start = new Date(now.getFullYear(), now.getMonth() - 1, 1);\r\n            end = new Date(now.getFullYear(), now.getMonth(), 0);\r\n            end.setHours(23, 59, 59, 999);\r\n        }\r\n\r\n        const q = query(collection(db, \"sales_orders\"), where(\"order_date\", \">=\", start), where(\"order_date\", \"<=\", end), orderBy(\"order_date\", \"asc\"));\r\n        const snap = await getDocs(q);\r\n        const sales = [];\r\n        snap.forEach(d => {\r\n            const data = d.data();\r\n            sales.push({ id: d.id, ...data, order_date: data.order_date.toDate() });\r\n        });\r\n\r\n        if (typeof window !== 'undefined') localStorage.setItem(cacheKey, JSON.stringify({ data: sales, ts: Date.now() }));\r\n        return sales;\r\n    };\r\n\r\n    useEffect(() => {\r\n        const loadDashboard = async () => {\r\n            setLoading(true);\r\n            try {\r\n                let currentMaster = masterData;\r\n                if (!currentMaster) {\r\n                    currentMaster = await fetchMasterData();\r\n                    setMasterData(currentMaster);\r\n                }\r\n                const sales = await fetchSalesData(filterRange);\r\n                processDashboard(sales, currentMaster);\r\n            } catch (e) { console.error(e); } finally { setLoading(false); }\r\n        };\r\n        loadDashboard();\r\n    }, [filterRange]);\r\n\r\n    const processDashboard = (sales, master) => {\r\n        if (!master) return;\r\n\r\n        let totalGross = 0, totalNet = 0, totalCost = 0;\r\n        const days = {};\r\n        const channels = {};\r\n        const prodStats = {};\r\n        const recentList = [];\r\n\r\n        sales.forEach(d => {\r\n            totalGross += (d.gross_amount || 0);\r\n            totalNet += (d.net_amount || 0);\r\n            totalCost += (d.total_cost || 0);\r\n            \r\n            const dateStr = new Date(d.order_date).toLocaleDateString('id-ID', { day: 'numeric', month: 'short' });\r\n            if (!days[dateStr]) days[dateStr] = { gross: 0, profit: 0 };\r\n            days[dateStr].gross += d.gross_amount || 0;\r\n            days[dateStr].profit += (d.net_amount || 0) - (d.total_cost || 0);\r\n\r\n            const ch = (d.channel_id || 'manual').toUpperCase();\r\n            channels[ch] = (channels[ch] || 0) + (d.gross_amount || 0);\r\n\r\n            if (d.items_summary) {\r\n                const parts = d.items_summary.split(', ');\r\n                parts.forEach(p => {\r\n                    const match = p.match(/(.*)\\((\\d+)\\)/);\r\n                    if (match) prodStats[match[1]] = (prodStats[match[1]] || 0) + parseInt(match[2]);\r\n                });\r\n            }\r\n\r\n            recentList.push({ id: d.order_number, customer: d.customer_name, amount: d.gross_amount, status: d.payment_status, time: d.order_date });\r\n        });\r\n\r\n        const profit = totalNet - totalCost;\r\n        const margin = totalGross > 0 ? (profit / totalGross) * 100 : 0;\r\n\r\n        setKpi({ \r\n            gross: totalGross, net: totalNet, profit: profit, margin: margin.toFixed(1), txCount: sales.length, \r\n            cash: master.cashBalance, \r\n            inventoryAsset: master.invStats.total_value // Mengambil langsung dari Cloud Function result\r\n        });\r\n\r\n        setChartTrendData({\r\n            labels: Object.keys(days),\r\n            datasets: [\r\n                { label: 'Omzet', data: Object.values(days).map(x=>x.gross), borderColor: '#D4AF37', backgroundColor: 'rgba(212, 175, 55, 0.1)', fill: true, tension: 0.4 },\r\n                { label: 'Profit', data: Object.values(days).map(x=>x.profit), borderColor: '#10B981', backgroundColor: 'rgba(16, 185, 129, 0.1)', fill: true, tension: 0.4 }\r\n            ]\r\n        });\r\n\r\n        setChartChannelData({\r\n            labels: Object.keys(channels),\r\n            datasets: [{ data: Object.values(channels), backgroundColor: ['#D4AF37', '#10B981', '#3B82F6', '#8B5CF6'], borderWidth: 0 }]\r\n        });\r\n\r\n        setTopProducts(Object.entries(prodStats).sort((a, b) => b[1] - a[1]).slice(0, 5));\r\n        setLowStockItems(master.lowStocks || []); // Menggunakan low stock dari query spesifik\r\n        setRecentSales(recentList.reverse().slice(0, 5));\r\n    };\r\n\r\n    const KpiCard = ({ title, value, sub, icon, color, loading }) => (\r\n        <div className=\"card-luxury p-6 relative overflow-hidden group hover:border-lumina-gold/30 transition-all\">\r\n            <div className=\"flex justify-between items-start relative z-10\">\r\n                <div>\r\n                    <p className=\"text-[10px] font-bold text-lumina-muted uppercase tracking-widest mb-1\">{title}</p>\r\n                    <h3 className=\"text-2xl font-display font-bold text-lumina-text tracking-tight\">\r\n                        {loading ? <div className=\"h-8 w-32 bg-lumina-highlight rounded animate-pulse\"></div> : value}\r\n                    </h3>\r\n                    <p className=\"text-xs text-lumina-muted mt-2 font-medium\">{sub}</p>\r\n                </div>\r\n                <div className={`p-3 rounded-xl ${color === 'gold' ? 'bg-lumina-gold/10 text-lumina-gold' : 'bg-lumina-highlight text-lumina-text'}`}>\r\n                    {icon}\r\n                </div>\r\n            </div>\r\n            <div className=\"absolute -bottom-6 -right-6 w-32 h-32 bg-gradient-to-br from-lumina-gold/10 to-transparent rounded-full blur-2xl group-hover:bg-lumina-gold/20 transition-all duration-500\"></div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-8 fade-in pb-20\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-end md:items-center gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-xl md:text-3xl font-display font-bold text-lumina-text tracking-tight\">Executive Dashboard</h2>\r\n                    <p className=\"text-sm text-lumina-muted mt-1 font-light\">Real-time business intelligence & analytics.</p>\r\n                </div>\r\n                <div className=\"bg-lumina-surface p-1 rounded-lg border border-lumina-border shadow-lg\">\r\n                    <select value={filterRange} onChange={(e) => setFilterRange(e.target.value)} className=\"text-sm bg-transparent text-lumina-text font-medium cursor-pointer py-1.5 pl-3 pr-8 outline-none\">\r\n                        <option value=\"today\" className=\"bg-lumina-base\">Hari Ini</option>\r\n                        <option value=\"this_month\" className=\"bg-lumina-base\">Bulan Ini</option>\r\n                        <option value=\"last_month\" className=\"bg-lumina-base\">Bulan Lalu</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <KpiCard title=\"Total Revenue\" value={formatRupiah(kpi.gross)} sub={`${kpi.txCount} Transactions`} color=\"gold\" icon={<svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/></svg>} loading={loading} />\r\n                <KpiCard title=\"Net Profit\" value={formatRupiah(kpi.profit)} sub={`Margin ${kpi.margin}%`} color=\"emerald\" icon={<svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"/></svg>} loading={loading} />\r\n                <KpiCard title=\"Liquid Cash\" value={formatRupiah(kpi.cash)} sub=\"All Wallets\" color=\"blue\" icon={<svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"/></svg>} loading={loading} />\r\n                <KpiCard title=\"Inventory Value\" value={formatRupiah(kpi.inventoryAsset)} sub=\"Cloud Aggregated (Live)\" color=\"amber\" icon={<svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"/></svg>} loading={loading} />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"lg:col-span-2 card-luxury p-6\">\r\n                    <h3 className=\"font-bold text-lumina-text mb-6\">Performance Trend</h3>\r\n                    <div className=\"h-72 w-full relative\">\r\n                        {chartTrendData ? <Line data={chartTrendData} options={{ responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: '#94A3B8' } } }, scales: { y: { grid: { color: '#2A2E3B' }, ticks: { color: '#94A3B8' } }, x: { grid: { display: false }, ticks: { color: '#94A3B8' } } } }} /> : <div className=\"h-full flex items-center justify-center text-lumina-muted\">Loading Chart...</div>}\r\n                    </div>\r\n                </div>\r\n                <div className=\"card-luxury p-6 flex flex-col\">\r\n                    <h3 className=\"font-bold text-lumina-text mb-6\">Channel Mix</h3>\r\n                    <div className=\"h-64 w-full relative flex justify-center items-center flex-1\">\r\n                         {chartChannelData ? <Doughnut data={chartChannelData} options={{ responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: { legend: { position: 'bottom', labels: { color: '#94A3B8' } } } }} /> : <div className=\"text-lumina-muted\">Loading Data...</div>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"card-luxury overflow-hidden\">\r\n                    <div className=\"px-6 py-4 border-b border-lumina-border bg-lumina-surface\">\r\n                        <h3 className=\"font-bold text-lumina-text text-sm uppercase tracking-wider\">üî• Top Products</h3>\r\n                    </div>\r\n                    <table className=\"table-dark\">\r\n                        <tbody>\r\n                            {topProducts.map(([sku, qty], i) => (\r\n                                <tr key={i} className=\"hover:bg-lumina-highlight\">\r\n                                    <td className=\"px-6 py-3 font-medium text-lumina-text\">{sku}</td>\r\n                                    <td className=\"px-6 py-3 text-right font-bold text-lumina-gold\">{qty}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                <div className=\"card-luxury overflow-hidden border-rose-900/30\">\r\n                    <div className=\"px-6 py-4 border-b border-rose-900/30 bg-rose-900/10 flex justify-between items-center\">\r\n                        <h3 className=\"font-bold text-rose-400 text-sm uppercase tracking-wider\">‚ö†Ô∏è Low Stock (Top 10)</h3>\r\n                        <span className=\"text-[10px] bg-rose-900/20 border border-rose-900/30 text-rose-400 px-2 py-0.5 rounded\">{lowStockItems.length} Items</span>\r\n                    </div>\r\n                    <div className=\"divide-y divide-lumina-border\">\r\n                        {lowStockItems.map((item, i) => (\r\n                            <div key={i} className=\"px-6 py-3 flex justify-between items-center hover:bg-lumina-highlight transition\">\r\n                                <div>\r\n                                    <p className=\"text-sm font-bold text-lumina-text\">{item.sku}</p>\r\n                                    <p className=\"text-xs text-lumina-muted truncate w-32\">{item.name}</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <span className=\"text-rose-500 font-bold text-sm\">{item.qty}</span>\r\n                                    <span className=\"text-lumina-muted text-[10px] block\">Min: {item.min}</span>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card-luxury overflow-hidden\">\r\n                    <div className=\"px-6 py-4 border-b border-lumina-border bg-lumina-surface\">\r\n                        <h3 className=\"font-bold text-lumina-text text-sm uppercase tracking-wider\">‚ö° Recent Sales</h3>\r\n                    </div>\r\n                    <div className=\"divide-y divide-lumina-border\">\r\n                        {recentSales.map((s, i) => (\r\n                            <div key={i} className=\"px-6 py-3 flex justify-between items-center hover:bg-lumina-highlight transition\">\r\n                                <div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"font-bold text-lumina-text text-sm\">{s.customer}</span>\r\n                                        <span className=\"text-[10px] bg-lumina-highlight text-lumina-muted px-1.5 rounded\">{s.id}</span>\r\n                                    </div>\r\n                                    <p className=\"text-[10px] text-lumina-muted\">{s.time.toLocaleTimeString('id-ID', {hour:'2-digit', minute:'2-digit'})}</p>\r\n                                </div>\r\n                                <span className=\"font-bold text-lumina-gold text-sm\">{formatRupiah(s.amount)}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}