{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/lib/utils.js"],"sourcesContent":["// lib/utils.js\r\nexport const formatRupiah = (n) => {\r\n  return new Intl.NumberFormat('id-ID', {\r\n    style: 'currency',\r\n    currency: 'IDR',\r\n    minimumFractionDigits: 0\r\n  }).format(n);\r\n};\r\n\r\nexport const sizeRank = ['ALL','ALL SIZE','ALLSIZE','XXXS','XXS','XS','S','M','L','XL','XXL','2XL','3XL','XXXL','4XL','5XL'];\r\n\r\nexport const sortBySize = (variantA, variantB) => {\r\n  const sizeA = (variantA.size || '').toUpperCase().trim();\r\n  const sizeB = (variantB.size || '').toUpperCase().trim();\r\n  const idxA = sizeRank.indexOf(sizeA);\r\n  const idxB = sizeRank.indexOf(sizeB);\r\n  \r\n  if (idxA !== -1 && idxB !== -1) return idxA - idxB;\r\n  if (idxA !== -1) return -1; \r\n  if (idxB !== -1) return 1;\r\n  \r\n  const colorCompare = (variantA.color || '').localeCompare(variantB.color || '');\r\n  if (colorCompare !== 0) return colorCompare;\r\n  \r\n  return (variantA.sku || '').localeCompare(variantB.sku || '');\r\n};"],"names":[],"mappings":"AAAA,eAAe;;;;;;;;;AACR,MAAM,eAAe,CAAC;IAC3B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,WAAW;IAAC;IAAM;IAAW;IAAU;IAAO;IAAM;IAAK;IAAI;IAAI;IAAI;IAAK;IAAM;IAAM;IAAM;IAAO;IAAM;CAAM;AAErH,MAAM,aAAa,CAAC,UAAU;IACnC,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,OAAO,SAAS,OAAO,CAAC;IAC9B,MAAM,OAAO,SAAS,OAAO,CAAC;IAE9B,IAAI,SAAS,CAAC,KAAK,SAAS,CAAC,GAAG,OAAO,OAAO;IAC9C,IAAI,SAAS,CAAC,GAAG,OAAO,CAAC;IACzB,IAAI,SAAS,CAAC,GAAG,OAAO;IAExB,MAAM,eAAe,CAAC,SAAS,KAAK,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,KAAK,IAAI;IAC5E,IAAI,iBAAiB,GAAG,OAAO;IAE/B,OAAO,CAAC,SAAS,GAAG,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,GAAG,IAAI;AAC5D"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/app/inventory/page.js"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { db, auth } from '@/lib/firebase';\r\nimport { collection, getDocs, doc, runTransaction, query, orderBy, where, serverTimestamp, limit } from 'firebase/firestore';\r\nimport { sortBySize } from '@/lib/utils';\r\nimport { Portal } from '@/lib/usePortal';\r\n\r\n// Konfigurasi Cache\r\nconst CACHE_KEY = 'lumina_inventory_data';\r\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 Menit\r\n\r\nexport default function InventoryPage() {\r\n    // --- STATE ---\r\n    const [products, setProducts] = useState([]);\r\n    const [warehouses, setWarehouses] = useState([]);\r\n    const [snapshots, setSnapshots] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    \r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [expandedProductId, setExpandedProductId] = useState(null); \r\n    \r\n    // Modals State\r\n    const [modalAdjOpen, setModalAdjOpen] = useState(false);\r\n    const [modalCardOpen, setModalCardOpen] = useState(false);\r\n    const [modalDetailOpen, setModalDetailOpen] = useState(false);\r\n    const [selectedProduct, setSelectedProduct] = useState(null); \r\n    \r\n    // Selected Data for Modals\r\n    const [adjData, setAdjData] = useState({});\r\n    const [cardData, setCardData] = useState([]);\r\n    const [modalGroup, setModalGroup] = useState('color');\r\n\r\n    useEffect(() => { \r\n        fetchData(); \r\n    }, []);\r\n\r\n    // --- FETCH DATA (Optimized) ---\r\n    const fetchData = async (forceRefresh = false) => {\r\n        setLoading(true);\r\n        try {\r\n            // 1. Cek Cache\r\n            if (!forceRefresh) {\r\n                const cached = sessionStorage.getItem(CACHE_KEY);\r\n                if (cached) {\r\n                    const { products, warehouses, snapshots, timestamp } = JSON.parse(cached);\r\n                    if (Date.now() - timestamp < CACHE_DURATION) {\r\n                        setProducts(products);\r\n                        setWarehouses(warehouses);\r\n                        setSnapshots(snapshots);\r\n                        setLoading(false);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // 2. Fetch Firebase (Jika cache expired / force)\r\n            const [snapWh, snapProd, snapVar, snapShot] = await Promise.all([\r\n                getDocs(query(collection(db, \"warehouses\"), orderBy(\"created_at\", \"asc\"))),\r\n                getDocs(query(collection(db, \"products\"), limit(100))), // Safety limit\r\n                getDocs(query(collection(db, \"product_variants\"), orderBy(\"sku\", \"asc\"))), // Perlu semua variant untuk mapping\r\n                getDocs(collection(db, \"stock_snapshots\")) // Perlu semua snapshot untuk total stock\r\n            ]);\r\n\r\n            const whList = []; \r\n            snapWh.forEach(d => whList.push({id: d.id, ...d.data()}));\r\n            setWarehouses(whList);\r\n\r\n            const shots = {}; \r\n            snapShot.forEach(d => shots[d.id] = d.data().qty || 0);\r\n            setSnapshots(shots);\r\n\r\n            const vars = []; \r\n            snapVar.forEach(d => vars.push({id: d.id, ...d.data()}));\r\n            \r\n            const prodMap = {};\r\n            snapProd.forEach(d => {\r\n                const p = d.data();\r\n                prodMap[d.id] = { id: d.id, ...p, variants: [], totalStock: 0 };\r\n            });\r\n\r\n            // Mapping Logic\r\n            vars.forEach(v => {\r\n                if (prodMap[v.product_id]) {\r\n                    let total = 0;\r\n                    whList.forEach(w => total += (shots[`${v.id}_${w.id}`] || 0));\r\n                    prodMap[v.product_id].variants.push(v);\r\n                    prodMap[v.product_id].totalStock += total;\r\n                }\r\n            });\r\n\r\n            const sorted = Object.values(prodMap).sort((a,b) => b.totalStock - a.totalStock);\r\n            setProducts(sorted);\r\n\r\n            // 3. Simpan Cache\r\n            sessionStorage.setItem(CACHE_KEY, JSON.stringify({\r\n                products: sorted,\r\n                warehouses: whList,\r\n                snapshots: shots,\r\n                timestamp: Date.now()\r\n            }));\r\n\r\n        } catch (e) { \r\n            console.error(e); \r\n        } finally { \r\n            setLoading(false); \r\n        }\r\n    };\r\n\r\n    // --- LOGIC ---\r\n    const filteredProducts = products.filter(p => \r\n        p.name.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n        p.base_sku.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    const toggleAccordion = (id) => {\r\n        setExpandedProductId(expandedProductId === id ? null : id);\r\n    };\r\n\r\n    // --- ACTIONS ---\r\n    const openDetail = (prod) => {\r\n        setSelectedProduct(prod);\r\n        setModalDetailOpen(true);\r\n    };\r\n\r\n    const openOpname = (v, prodName) => {\r\n        setAdjData({ \r\n            variantId: v.id, sku: v.sku, productName: prodName, \r\n            warehouseId: warehouses[0]?.id, \r\n            currentQty: snapshots[`${v.id}_${warehouses[0]?.id}`] || 0, \r\n            realQty: '', note: ''\r\n        });\r\n        setModalAdjOpen(true);\r\n    };\r\n\r\n    const handleAdjWarehouseChange = (e) => {\r\n        const whId = e.target.value;\r\n        setAdjData(prev => ({ ...prev, warehouseId: whId, currentQty: snapshots[`${prev.variantId}_${whId}`] || 0 }));\r\n    };\r\n\r\n    const submitOpname = async (e) => {\r\n        e.preventDefault();\r\n        const diff = parseInt(adjData.realQty) - adjData.currentQty;\r\n        if (isNaN(diff) || diff === 0) return alert(\"Tidak ada perubahan.\");\r\n\r\n        try {\r\n            await runTransaction(db, async (t) => {\r\n                const mRef = doc(collection(db, \"stock_movements\"));\r\n                t.set(mRef, { \r\n                    variant_id: adjData.variantId, warehouse_id: adjData.warehouseId, type: 'adjustment', \r\n                    qty: diff, ref_id: mRef.id, ref_type: 'opname', date: serverTimestamp(), \r\n                    notes: adjData.note, created_by: auth.currentUser?.email \r\n                });\r\n                const sRef = doc(db, \"stock_snapshots\", `${adjData.variantId}_${adjData.warehouseId}`);\r\n                const sDoc = await t.get(sRef);\r\n                if(sDoc.exists()) t.update(sRef, { qty: parseInt(adjData.realQty) });\r\n                else t.set(sRef, { id: sRef.id, variant_id: adjData.variantId, warehouse_id: adjData.warehouseId, qty: parseInt(adjData.realQty) });\r\n            });\r\n            \r\n            alert(\"Stok berhasil diupdate!\");\r\n            \r\n            // Clear Cache & Refresh\r\n            sessionStorage.removeItem(CACHE_KEY);\r\n            setModalAdjOpen(false);\r\n            fetchData(true);\r\n\r\n        } catch (e) { \r\n            alert(e.message); \r\n        }\r\n    };\r\n\r\n    const openCard = async (vId, sku) => {\r\n        setModalCardOpen(true); setCardData(null);\r\n        try {\r\n            const q = query(collection(db, \"stock_movements\"), where(\"variant_id\", \"==\", vId), orderBy(\"date\", \"desc\"), limit(20));\r\n            const snap = await getDocs(q);\r\n            setCardData(snap.docs.map(d => ({id: d.id, ...d.data()})));\r\n        } catch (e) { setCardData([]); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 fade-in pb-20\">\r\n            {/* --- HEADER SECTION --- */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-6\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-display font-semibold text-lumina-text tracking-tight\">Inventory Control</h2>\r\n                    <p className=\"text-sm text-lumina-muted mt-1 font-light\">Monitor stok fisik & virtual secara real-time.</p>\r\n                </div>\r\n                \r\n                <div className=\"bg-lumina-surface p-1.5 rounded-xl border border-lumina-border shadow-lg flex items-center w-full md:w-80 focus-within:ring-1 focus-within:ring-lumina-gold transition-all\">\r\n                    <div className=\"pl-3 text-lumina-muted\">\r\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"/></svg>\r\n                    </div>\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Search Product or SKU...\" \r\n                        className=\"w-full bg-transparent text-lumina-text text-sm px-3 py-2 outline-none placeholder:text-lumina-muted/50 font-mono\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* --- INVENTORY TABLE (ACCORDION) --- */}\r\n            <div className=\"card-luxury overflow-hidden min-h-[500px]\">\r\n                <div className=\"table-wrapper-dark border-none shadow-none rounded-none\">\r\n                    <table className=\"table-dark\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th className=\"w-16 pl-6\">Img</th>\r\n                                <th>Product Name</th>\r\n                                <th>Base SKU</th>\r\n                                <th className=\"text-center\">Category</th>\r\n                                <th className=\"text-right pr-8\">Total Stock</th>\r\n                                <th className=\"w-10\"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {loading ? (\r\n                                <tr><td colSpan=\"6\" className=\"px-6 py-12 text-center text-lumina-muted animate-pulse\">Calculating Stock...</td></tr>\r\n                            ) : filteredProducts.length === 0 ? (\r\n                                <tr><td colSpan=\"6\" className=\"px-6 py-12 text-center text-lumina-muted\">No products found.</td></tr>\r\n                            ) : (\r\n                                filteredProducts.map(p => {\r\n                                    const isExpanded = expandedProductId === p.id;\r\n                                    const isLowStock = p.totalStock <= 10;\r\n                                    \r\n                                    return (\r\n                                        <React.Fragment key={p.id}>\r\n                                            {/* PARENT ROW */}\r\n                                            <tr \r\n                                                onClick={() => toggleAccordion(p.id)}\r\n                                                className={`group cursor-pointer transition-all duration-200 ${isExpanded ? 'bg-lumina-highlight/30 border-l-4 border-l-lumina-gold' : 'hover:bg-lumina-highlight/20 border-l-4 border-l-transparent'}`}\r\n                                            >\r\n                                                <td className=\"pl-6 py-4\">\r\n                                                    <div className=\"w-12 h-12 rounded-lg bg-lumina-base border border-lumina-border flex items-center justify-center overflow-hidden shadow-inner\">\r\n                                                        {p.image_url ? (\r\n                                                            <img src={p.image_url} alt=\"Product\" className=\"w-full h-full object-cover\" />\r\n                                                        ) : (\r\n                                                            <svg className=\"w-5 h-5 text-lumina-muted opacity-30\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"/></svg>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td className=\"px-6 py-4\">\r\n                                                    <div className=\"font-display font-medium text-lumina-text text-base group-hover:text-lumina-gold transition-colors\">{p.name}</div>\r\n                                                    <div className=\"text-xs text-lumina-muted mt-1\">{p.variants.length} Variants</div>\r\n                                                </td>\r\n                                                <td className=\"px-6 py-4\">\r\n                                                    <span className=\"font-mono text-sm text-lumina-muted group-hover:text-white transition-colors\">{p.base_sku}</span>\r\n                                                </td>\r\n                                                <td className=\"px-6 py-4 text-center\">\r\n                                                    <span className=\"badge-luxury badge-neutral\">{p.category}</span>\r\n                                                </td>\r\n                                                <td className=\"px-6 py-4 text-right pr-8\">\r\n                                                    <span className={`text-lg font-mono font-bold ${p.totalStock === 0 ? 'text-rose-500' : (isLowStock ? 'text-amber-500' : 'text-emerald-400')}`}>\r\n                                                        {p.totalStock}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"px-6 py-4 text-right\">\r\n                                                    <span className={`transform transition-transform duration-300 text-lumina-gold inline-block ${isExpanded ? 'rotate-180' : 'rotate-0'}`}>\r\n                                                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"/></svg>\r\n                                                    </span>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                            {/* EXPANDED CONTENT */}\r\n                                            {isExpanded && (\r\n                                                <tr className=\"bg-[#0F1115] shadow-inner border-b border-lumina-border\">\r\n                                                    <td colSpan=\"6\" className=\"p-0\">\r\n                                                        <div className=\"p-6 fade-in\">\r\n                                                            <div className=\"border border-lumina-border rounded-lg overflow-hidden w-full bg-lumina-base\">\r\n                                                                <table className=\"w-full text-sm text-left\">\r\n                                                                    <thead className=\"bg-lumina-surface text-[10px] text-lumina-muted uppercase tracking-wider font-semibold border-b border-lumina-border\">\r\n                                                                        <tr>\r\n                                                                            <th className=\"px-4 py-3 w-48\">Variant SKU</th>\r\n                                                                            <th className=\"px-4 py-3 w-32\">Spec</th>\r\n                                                                            {warehouses.map(w => (\r\n                                                                                <th key={w.id} className={`px-4 py-3 text-center border-l border-lumina-border ${w.type==='virtual_supplier' ? 'text-indigo-400' : 'text-emerald-500'}`}>\r\n                                                                                    {w.name}\r\n                                                                                </th>\r\n                                                                            ))}\r\n                                                                            <th className=\"px-4 py-3 text-right\">Actions</th>\r\n                                                                        </tr>\r\n                                                                    </thead>\r\n                                                                    <tbody className=\"divide-y divide-lumina-border\">\r\n                                                                        {p.variants.sort(sortBySize).map(v => (\r\n                                                                            <tr key={v.id} className=\"hover:bg-lumina-highlight/20 transition-colors\">\r\n                                                                                <td className=\"px-4 py-3 font-mono text-lumina-gold text-xs font-bold\">{v.sku}</td>\r\n                                                                                <td className=\"px-4 py-3 text-lumina-text\">\r\n                                                                                    <div className=\"flex gap-2\">\r\n                                                                                        <span className=\"badge-luxury badge-neutral\">{v.color}</span>\r\n                                                                                        <span className=\"badge-luxury badge-neutral\">{v.size}</span>\r\n                                                                                    </div>\r\n                                                                                </td>\r\n                                                                                {warehouses.map(w => {\r\n                                                                                    const qty = snapshots[`${v.id}_${w.id}`] || 0;\r\n                                                                                    return (\r\n                                                                                        <td key={w.id} className=\"px-4 py-3 text-center border-l border-lumina-border/30\">\r\n                                                                                            <span className={`font-mono font-medium ${qty > 0 ? 'text-white' : 'text-lumina-border'}`}>\r\n                                                                                                {qty}\r\n                                                                                            </span>\r\n                                                                                        </td>\r\n                                                                                    )\r\n                                                                                })}\r\n                                                                                <td className=\"px-4 py-3 text-right\">\r\n                                                                                    <div className=\"flex justify-end gap-2\">\r\n                                                                                        <button onClick={(e) => { e.stopPropagation(); openOpname(v, p.name); }} className=\"text-[10px] uppercase font-bold text-lumina-muted hover:text-lumina-gold border border-lumina-border hover:border-lumina-gold rounded px-2 py-1 transition-colors\">\r\n                                                                                            Opname\r\n                                                                                        </button>\r\n                                                                                        <button onClick={(e) => { e.stopPropagation(); openCard(v.id, v.sku); }} className=\"text-[10px] uppercase font-bold text-lumina-muted hover:text-white border border-lumina-border hover:border-white rounded px-2 py-1 transition-colors\">\r\n                                                                                            History\r\n                                                                                        </button>\r\n                                                                                    </div>\r\n                                                                                </td>\r\n                                                                            </tr>\r\n                                                                        ))}\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            )}\r\n                                        </React.Fragment>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* --- DETAIL MODAL (FIXED HEIGHT & SCROLL) --- */}\r\n            <Portal>\r\n            {modalDetailOpen && selectedProduct && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 fade-in\">\r\n                    <div className=\"bg-lumina-surface border border-lumina-border rounded-2xl shadow-2xl w-full max-w-5xl h-[85vh] flex flex-col overflow-hidden\">\r\n                        <div className=\"p-6 border-b border-lumina-border flex justify-between items-center bg-lumina-surface z-10\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                {selectedProduct.image_url && <img src={selectedProduct.image_url} className=\"w-12 h-12 rounded-lg border border-lumina-border object-cover\" />}\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-white font-display\">{selectedProduct.base_sku}</h3>\r\n                                    <p className=\"text-sm text-lumina-muted\">{selectedProduct.name}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"bg-lumina-base border border-lumina-border p-1 rounded-lg flex shadow-sm\">\r\n                                    <button onClick={() => setModalGroup('color')} className={`px-3 py-1 text-xs font-bold rounded-md transition-all ${modalGroup==='color' ? 'bg-lumina-gold text-black' : 'text-lumina-muted hover:bg-lumina-highlight'}`}>Color</button>\r\n                                    <button onClick={() => setModalGroup('size')} className={`px-3 py-1 text-xs font-bold rounded-md transition-all ${modalGroup==='size' ? 'bg-lumina-gold text-black' : 'text-lumina-muted hover:bg-lumina-highlight'}`}>Size</button>\r\n                                </div>\r\n                                <button onClick={() => setModalDetailOpen(false)} className=\"text-lumina-muted hover:text-white p-1 text-2xl\">✕</button>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        {/* SCROLLABLE CONTENT */}\r\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar bg-lumina-base\">\r\n                            <table className=\"table-dark w-full\">\r\n                                <thead className=\"sticky top-0 z-10 bg-lumina-surface shadow-md border-b border-lumina-border\">\r\n                                    <tr>\r\n                                        <th className=\"pl-6\">Variant</th>\r\n                                        {warehouses.map(w => <th key={w.id} className={`text-center ${w.type==='virtual_supplier' ? 'text-indigo-400' : 'text-emerald-500'}`}>{w.name}</th>)}\r\n                                        <th className=\"text-center pr-6\">Actions</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-lumina-border\">\r\n                                    {selectedProduct.variants.sort(sortBySize).map(v => (\r\n                                        <tr key={v.id} className=\"hover:bg-lumina-highlight/20\">\r\n                                            <td className=\"pl-6 font-medium text-lumina-text\">\r\n                                                {modalGroup === 'color' ? v.size : v.color} <span className=\"ml-2 badge-luxury badge-neutral\">{v.sku}</span>\r\n                                            </td>\r\n                                            {warehouses.map(w => {\r\n                                                const qty = snapshots[`${v.id}_${w.id}`] || 0;\r\n                                                return <td key={w.id} className={`text-center font-mono font-bold ${qty>0 ? 'text-white' : 'text-lumina-border'}`}>{qty}</td>\r\n                                            })}\r\n                                            <td className=\"text-center pr-6\">\r\n                                                <div className=\"flex justify-center gap-2\">\r\n                                                    <button onClick={() => openOpname(v, selectedProduct.name)} className=\"btn-ghost-dark px-2 py-1 text-[10px]\">Opname</button>\r\n                                                    <button onClick={() => openCard(v.id, v.sku)} className=\"btn-ghost-dark px-2 py-1 text-[10px]\">History</button>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            </Portal>\r\n\r\n            {/* --- STOCK OPNAME MODAL (FIXED) --- */}\r\n            <Portal>\r\n            {modalAdjOpen && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 fade-in\">\r\n                    <div className=\"bg-lumina-surface rounded-2xl shadow-2xl border border-lumina-border w-full max-w-md flex flex-col max-h-[90vh] overflow-hidden ring-1 ring-lumina-gold/20\">\r\n                        <div className=\"px-6 py-5 border-b border-lumina-border bg-lumina-surface rounded-t-2xl\">\r\n                            <h3 className=\"text-lg font-display font-bold text-white\">Stock Opname</h3>\r\n                            <p className=\"text-xs text-lumina-muted mt-1\">Adjust stock discrepancy.</p>\r\n                        </div>\r\n                        \r\n                        {/* SCROLLABLE FORM */}\r\n                        <div className=\"p-6 space-y-5 overflow-y-auto flex-1\">\r\n                            <div className=\"bg-lumina-base p-4 rounded-lg border border-lumina-border flex justify-between items-center\">\r\n                                <div>\r\n                                    <p className=\"font-mono font-bold text-lumina-gold text-sm\">{adjData.sku}</p>\r\n                                    <p className=\"text-xs text-lumina-text mt-0.5\">{adjData.productName}</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-[10px] text-lumina-muted uppercase\">System Qty</p>\r\n                                    <p className=\"text-lg font-bold text-white font-mono\">{adjData.currentQty}</p>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <form onSubmit={submitOpname} className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-lumina-muted uppercase mb-1 block\">Warehouse</label>\r\n                                    <select className=\"input-luxury\" value={adjData.warehouseId} onChange={handleAdjWarehouseChange}>\r\n                                        {warehouses.map(w => <option key={w.id} value={w.id}>{w.name}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                \r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-lumina-gold uppercase mb-1 block\">New Physical Quantity</label>\r\n                                    <input type=\"number\" required className=\"input-luxury border-lumina-gold text-center font-bold text-white bg-lumina-gold/10 focus:ring-lumina-gold text-lg py-3\" value={adjData.realQty} onChange={e => setAdjData({...adjData, realQty: e.target.value})} autoFocus placeholder=\"0\" />\r\n                                </div>\r\n                                \r\n                                <div>\r\n                                    <label className=\"text-xs font-bold text-lumina-muted uppercase mb-1 block\">Reason / Notes</label>\r\n                                    <textarea required className=\"input-luxury\" rows=\"2\" value={adjData.note} onChange={e => setAdjData({...adjData, note: e.target.value})} placeholder=\"E.g. Broken goods, Found item...\"></textarea>\r\n                                </div>\r\n                                \r\n                                {/* FOOTER (Inside form so it scrolls with content on very small screens, or you can move it out) */}\r\n                                <div className=\"flex justify-end gap-3 pt-2 border-t border-lumina-border mt-4\">\r\n                                    <button type=\"button\" onClick={() => setModalAdjOpen(false)} className=\"btn-ghost-dark\">Cancel</button>\r\n                                    <button type=\"submit\" className=\"btn-gold\">Save Adjustment</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            </Portal>\r\n\r\n            {/* --- STOCK CARD MODAL (FIXED) --- */}\r\n            <Portal>\r\n            {modalCardOpen && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 fade-in\">\r\n                    <div className=\"bg-lumina-surface rounded-2xl shadow-2xl border border-lumina-border w-full max-w-2xl flex flex-col max-h-[80vh] overflow-hidden\">\r\n                        <div className=\"px-6 py-5 border-b border-lumina-border flex justify-between items-center bg-lumina-surface\">\r\n                            <h3 className=\"text-lg font-display font-bold text-white\">Stock History</h3>\r\n                            <button onClick={() => setModalCardOpen(false)} className=\"text-lumina-muted hover:text-white text-xl\">✕</button>\r\n                        </div>\r\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar bg-lumina-base\">\r\n                            <table className=\"table-dark w-full\">\r\n                                <thead className=\"sticky top-0 z-10 bg-lumina-surface border-b border-lumina-border\">\r\n                                    <tr><th className=\"pl-6\">Date</th><th>Type</th><th>Warehouse</th><th className=\"text-right\">Qty</th><th>Note</th></tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {!cardData ? <tr><td colSpan=\"5\" className=\"text-center p-6 text-lumina-muted\">Loading...</td></tr> : cardData.length === 0 ? <tr><td colSpan=\"5\" className=\"text-center p-6 italic text-lumina-muted\">No history found.</td></tr> : cardData.map(m => (\r\n                                        <tr key={m.id}>\r\n                                            <td className=\"pl-6 text-xs text-lumina-muted font-mono\">{new Date(m.date.toDate()).toLocaleDateString()}</td>\r\n                                            <td><span className=\"badge-luxury badge-neutral\">{m.type}</span></td>\r\n                                            <td className=\"text-xs text-lumina-text\">{warehouses.find(w => w.id === m.warehouse_id)?.name}</td>\r\n                                            <td className={`text-right font-mono font-bold ${m.qty > 0 ? 'text-emerald-400' : 'text-rose-400'}`}>{m.qty > 0 ? `+${m.qty}` : m.qty}</td>\r\n                                            <td className=\"text-xs text-lumina-muted truncate max-w-[150px]\">{m.notes}</td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            </Portal>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}